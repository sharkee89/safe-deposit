(this["webpackJsonpsafe-deposit"]=this["webpackJsonpsafe-deposit"]||[]).push([[0],{24:function(e,t,r){e.exports=r.p+"static/media/unlock.a9294e7b.wav"},25:function(e,t,r){e.exports=r.p+"static/media/error.dd18d3ba.mp3"},26:function(e,t,r){e.exports=r.p+"static/media/button.111a056b.mp3"},28:function(e,t,r){e.exports=r(45)},33:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(16),c=r.n(s),u=(r(33),r(11)),o=(r(39),r(8)),i=r(9),p=r(12),S=r(10),O=r(13),d=(r(40),function(e){function t(){return Object(o.a)(this,t),Object(p.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:this.props.screen.on?"screen screen--on":"screen screen--off"},a.a.createElement("div",{className:"screen__lseg"},this.props.screen.locked),a.a.createElement("div",{className:"screen__mseg"},this.props.screen.status))}}]),t}(n.Component)),f=Object(u.b)((function(e){return{screen:e.screen}}),{})(d),l=(r(41),r(6)),b=r(18);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(r,!0).forEach((function(t){Object(b.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E={name:[]},v={keys:[{id:"7",value:7},{id:"8",value:8},{id:"9",value:9},{id:"4",value:4},{id:"5",value:5},{id:"6",value:6},{id:"1",value:1},{id:"2",value:2},{id:"3",value:3},{id:"*",value:"*"},{id:"",value:0},{id:"L",value:"L"}],serialNumber:"4815162342",screenStatus:{BLANK:"",ERROR:"Error",READY:"Ready",LOCK:"Locking...",UNLOCK:"Unlocking...",SERVICE:"Service",VALIDATE:"Validating...",SET_PASSWORD:"Enter new password",SET_PASSWORD_SUCCESS:"Setting new password...",SET_PASSWORD_FAIL:"Password changing error"},screenLocked:{LOCK:"Locked",UNLOCK:"Unlocked"},serviceUrl:"https://9w4qucosgf.execute-api.eu-central-1.amazonaws.com/default/CR-JS_team_M02a?code=",setPasswordCode:"******",serviceCode:"000000"};function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(r,!0).forEach((function(t){Object(b.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A={locked:v.screenLocked.LOCK,status:v.screenStatus.READY,on:!1,progress:!1,serviceMode:!1,setPassword:!1,idleTime:0,submitTime:0},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t&&t.type){case"CHANGE_STATUS":return y({},e,{status:t.payload,on:!0});case"START_IDLE_TIMING":return y({},e,{progress:!0,idleTime:0,submitTime:0});case"GO_IDLE":return y({},e,{on:!1,progress:!1,status:v.screenStatus.READY,screenMode:!1,setPassword:!1,idleTime:0,submitTime:0});case"RESET_SUBMIT_TIME":return y({},e,{submitTime:0});case"PROCESS_INPUT_ASYNC":return y({},e,{status:v.screenStatus.VALIDATE});case"CHANGE_LOCK":return y({},e,{locked:t.payload});case"UNLOCK_SUCCESS":return y({},e,{status:v.screenStatus.UNLOCK,serviceMode:!1,setPassword:!1});case"UNLOCK_FAIL":return y({},e,{status:v.screenStatus.ERROR,serviceMode:!1,setPassword:!1});case"START_LOCK_ASYNC":return y({},e,{status:v.screenStatus.VALIDATE});case"LOCK_SUCCESS":return y({},e,{status:v.screenStatus.LOCK});case"LOCK_FAIL":return y({},e,{status:v.screenStatus.ERROR});case"START_SERVICE":return y({},e,{status:v.screenStatus.SERVICE,serviceMode:!0,setPassword:!1});case"START_SET_PASSWORD":return y({},e,{status:v.screenStatus.SET_PASSWORD,serviceMode:!1,setPassword:!0});case"SET_PASSWORD_SUCCESS":return y({},e,{status:v.screenStatus.SET_PASSWORD_SUCCESS});case"SET_PASSWORD_FAIL":return y({},e,{status:v.screenStatus.SET_PASSWORD_FAIL});default:return e}},w=Object(l.c)({safe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TEST_ACTION":return h({},e,{name:t.payload});default:return e}},screen:T}),x=r(27),m=r(2),j=r.n(m),k=r(4),L=r(24),R=r.n(L),N=r(25),P=r.n(N),D=j.a.mark(ie),I=j.a.mark(pe),U=j.a.mark(Se),g=j.a.mark(Oe),K=j.a.mark(de),G=j.a.mark(fe),W=j.a.mark(le),Y=j.a.mark(be),M=j.a.mark(_e),V=j.a.mark(he),B=j.a.mark(Ee),F=j.a.mark(ve),H=j.a.mark(Ce),X=j.a.mark(ye),J=j.a.mark(Ae),q=j.a.mark(Te),z=j.a.mark(we),$=j.a.mark(xe),Q=j.a.mark(me),Z=j.a.mark(je),ee=j.a.mark(ke),te=j.a.mark(Le),re=j.a.mark(Re),ne=j.a.mark(Ne),ae=j.a.mark(Pe),se=j.a.mark(De),ce=new Audio(R.a),ue=new Audio(P.a),oe=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function ie(e){var t;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(k.e)({type:"CHANGE_STATUS",payload:t});case 3:case"end":return r.stop()}}),D)}function pe(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.i)("CHANGE_STATUS_ASYNC",ie);case 2:case"end":return e.stop()}}),I)}function Se(){var e,t,r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(k.f)(T);case 2:return e=n.sent,t=e.screen.idleTime,r=e.screen.submitTime,n.prev=5,n.next=8,Object(k.e)({type:"START_IDLE_TIMING"});case 8:if(!(++t>4)){n.next=16;break}return t=0,n.next=14,Object(k.e)({type:"GO_IDLE"});case 14:return n.next=16,Object(k.e)({type:"STOP_BACKGROUND_SYNC"});case 16:if(!(++r>1&&6===e.screen.status.length&&e.screen.locked===v.screenLocked.LOCK)||e.screen.serviceMode||e.screen.setPassword){n.next=24;break}return n.next=20,Object(k.e)({type:"RESET_SUBMIT_TIME"});case 20:return n.next=22,Object(k.e)({type:"PROCESS_INPUT_ASYNC",payload:e.screen.status});case 22:return n.next=24,Object(k.e)({type:"STOP_BACKGROUND_SYNC"});case 24:if(!(r>1&&e.screen.serviceMode&&e.screen.locked===v.screenLocked.LOCK)){n.next=31;break}return n.next=27,Object(k.e)({type:"CHANGE_STATUS",payload:v.screenStatus.VALIDATE});case 27:return n.next=29,Object(k.e)({type:"START_SERVICE_WORK",payload:e.screen.status});case 29:return n.next=31,Object(k.e)({type:"STOP_BACKGROUND_SYNC"});case 31:if(!(r>1&&e.screen.setPassword)){n.next=38;break}return n.next=34,Object(k.e)({type:"CHANGE_STATUS",payload:v.screenStatus.VALIDATE});case 34:return n.next=36,Object(k.e)({type:"START_SET_PASSWORD_WORK",payload:e.screen.status});case 36:return n.next=38,Object(k.e)({type:"STOP_BACKGROUND_SYNC"});case 38:return n.next=40,oe(1e3);case 40:n.next=8;break;case 42:return n.prev=42,n.finish(42);case 44:case"end":return n.stop()}}),U,null,[[5,,42,44]])}function Oe(e){var t;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,oe(1500);case 3:return r.prev=3,r.next=6,Object(k.b)(fetch,"".concat(v.serviceUrl).concat(t));case 6:return ce.play(),r.next=9,Object(k.e)({type:"UNLOCK_SUCCESS"});case 9:r.next=17;break;case 11:return r.prev=11,r.t0=r.catch(3),ue.play(),r.next=16,Object(k.e)({type:"UNLOCK_FAIL"});case 16:return r.abrupt("return");case 17:case"end":return r.stop()}}),g,null,[[3,11]])}function de(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.h)("START_SERVICE_WORK",Oe);case 2:case"end":return e.stop()}}),K)}function fe(e){var t;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(k.e)({type:"CHANGE_STATUS",payload:v.screenStatus.VALIDATE});case 3:return r.next=5,oe(1500);case 5:if(6!==t.length){r.next=12;break}return localStorage.setItem("password",t),ce.play(),r.next=10,Object(k.e)({type:"SET_PASSWORD_SUCCESS"});case 10:r.next=15;break;case 12:return ue.play(),r.next=15,Object(k.e)({type:"SET_PASSWORD_FAIL"});case 15:case"end":return r.stop()}}),G)}function le(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(1500);case 2:return e.next=4,Object(k.e)({type:"GO_IDLE"});case 4:case"end":return e.stop()}}),W)}function be(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.h)("SET_PASSWORD_SUCCESS",le);case 2:case"end":return e.stop()}}),Y)}function _e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.h)("SET_PASSWORD_FAIL",le);case 2:case"end":return e.stop()}}),M)}function he(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.h)("START_SET_PASSWORD_WORK",fe);case 2:case"end":return e.stop()}}),V)}function Ee(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.g)("START_IDLE_TIMING");case 2:if(!t.sent){t.next=12;break}return t.next=5,Object(k.d)(Se);case 5:return e=t.sent,t.next=8,Object(k.g)("STOP_BACKGROUND_SYNC");case 8:return t.next=10,Object(k.c)(e);case 10:t.next=0;break;case 12:case"end":return t.stop()}}),B)}function ve(e){var t;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,oe(1500);case 3:if(t!==v.serviceCode){r.next=7;break}return r.next=6,Object(k.e)({type:"START_SERVICE"});case 6:return r.abrupt("return");case 7:if(t!==v.setPasswordCode){r.next=11;break}return r.next=10,Object(k.e)({type:"START_SET_PASSWORD"});case 10:return r.abrupt("return");case 11:return r.next=13,Object(k.b)(xe,[t,"UNLOCK_SUCCESS","LOCK_FAIL"]);case 13:case"end":return r.stop()}}),F)}function Ce(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.h)("PROCESS_INPUT_ASYNC",ve);case 2:case"end":return e.stop()}}),H)}function ye(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.b)(Pe,[!0,v.screenLocked.UNLOCK]);case 2:case"end":return e.stop()}}),X)}function Ae(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.h)("UNLOCK_SUCCESS",ye);case 2:case"end":return e.stop()}}),J)}function Te(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.b)(Pe,[!1,v.screenLocked.UNLOCK]);case 2:case"end":return e.stop()}}),q)}function we(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.h)("UNLOCK_FAIL",Te);case 2:case"end":return e.stop()}}),z)}function xe(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e[0]!==localStorage.getItem("password")){t.next=6;break}return ce.play(),t.next=4,Object(k.e)({type:e[1]});case 4:t.next=9;break;case 6:return ue.play(),t.next=9,Object(k.e)({type:e[2]});case 9:case"end":return t.stop()}}),$)}function me(e){var t;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,oe(1500);case 3:if(6===t.length){r.next=8;break}return ue.play(),r.next=7,Object(k.e)({type:"LOCK_FAIL"});case 7:return r.abrupt("return");case 8:return r.next=10,Object(k.b)(xe,[t,"LOCK_SUCCESS","LOCK_FAIL"]);case 10:case"end":return r.stop()}}),Q)}function je(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.h)("START_LOCK_ASYNC",me);case 2:case"end":return e.stop()}}),Z)}function ke(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.h)("LOCK_SUCCESS",Re);case 2:case"end":return e.stop()}}),ee)}function Le(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.h)("LOCK_FAIL",Ne);case 2:case"end":return e.stop()}}),te)}function Re(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.b)(Pe,[!0,v.screenLocked.LOCK]);case 2:case"end":return e.stop()}}),re)}function Ne(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.b)(Pe,[!1,v.screenLocked.LOCK]);case 2:case"end":return e.stop()}}),ne)}function Pe(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(1500);case 2:if(!e[0]){t.next=5;break}return t.next=5,Object(k.e)({type:"CHANGE_LOCK",payload:e[1]});case 5:return t.next=7,Object(k.e)({type:"GO_IDLE"});case 7:case"end":return t.stop()}}),ae)}function De(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([pe(),Ee(),Ce(),Ae(),we(),je(),ke(),Le(),de(),he(),be(),_e()]);case 2:case"end":return e.stop()}}),se)}var Ie=Object(x.a)(),Ue=Object(l.e)(w,Object(l.d)(Object(l.a)(Ie),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));Ie.run(De);var ge=Ue;r(43);var Ke=r(26),Ge=r.n(Ke),We=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(p.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).btnSound=new Audio(Ge.a),r}return Object(O.a)(t,e),Object(i.a)(t,[{key:"dispatchSetPassword",value:function(){ge.dispatch({type:"START_SET_PASSWORD"}),ge.dispatch({type:"STOP_BACKGROUND_SYNC"})}},{key:"dispatchLockAsync",value:function(e){ge.dispatch({type:"START_LOCK_ASYNC",payload:e}),ge.dispatch({type:"STOP_BACKGROUND_SYNC"})}},{key:"process",value:function(e){this.btnSound.play(),ge.dispatch({type:"STOP_BACKGROUND_SYNC"}),ge.dispatch({type:"CHANGE_STATUS_ASYNC",payload:e}),ge.dispatch({type:"START_IDLE_TIMING"})}},{key:"lockPress",value:function(){this.btnSound.play();var e=this.props.screen.status.length>6?6:this.props.screen.status.length,t=this.props.screen.status.substr(0,e);t===v.setPasswordCode?this.dispatchSetPassword():this.props.screen.locked===v.screenLocked.UNLOCK&&this.dispatchLockAsync(t)}},{key:"changeStatus",value:function(e){if(this.props.screen.status!==v.screenStatus.VALIDATE&&this.props.screen.status!==v.screenStatus.ERROR&&this.props.screen.status!==v.screenStatus.UNLOCK){"L"===e&&this.lockPress();var t=(r=this.props.screen.status)===v.screenStatus.BLANK||r===v.screenStatus.ERROR||r===v.screenStatus.LOCK||r===v.screenStatus.READY||r===v.screenStatus.SERVICE||r===v.screenStatus.UNLOCK||r===v.screenStatus.VALIDATE||r===v.screenStatus.SET_PASSWORD?e:this.props.screen.status+=e.toString();this.props.screen.serviceMode?this.process(t):t.length>6||this.process(t)}var r}},{key:"render",value:function(){var e=this;return a.a.createElement("button",{className:"key",onClick:function(){return e.changeStatus(e.props.value)}},this.props.value)}}]),t}(n.Component),Ye=Object(u.b)((function(e){return{screen:e.screen}}),{changeStatus:function(e){return function(t){t({type:"CHANGE_STATUS",payload:e})}}})(We),Me=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(p.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).state={keys:v.keys},r}return Object(O.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"keypad"},this.state.keys.map((function(e){return a.a.createElement(Ye,{key:e.id,value:e.value})})))}}]),t}(n.Component),Ve=Object(u.b)((function(e){return{safe:e.safe.name}}),{testAction:function(){return function(e){fetch("https://jsonplaceholder.typicode.com/todos").then((function(e){return e.json()})).then((function(t){return e({type:"TEST_ACTION",payload:t})}))}}})(Me),Be=(r(44),function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(p.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).state={serialNumber:v.serialNumber},r}return Object(O.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"safe-deposit"},a.a.createElement(f,null),a.a.createElement(Ve,null),a.a.createElement("div",{className:"safe-deposit__serial-number"},"S/N: ",this.state.serialNumber))}}]),t}(n.Component));var Fe=function(){return a.a.createElement(u.a,{store:ge},a.a.createElement("div",{className:"App"},a.a.createElement(Be,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.1824e39e.chunk.js.map