(this["webpackJsonpsafe-deposit"]=this["webpackJsonpsafe-deposit"]||[]).push([[0],{24:function(e,t,r){e.exports=r.p+"static/media/unlock.a9294e7b.wav"},25:function(e,t,r){e.exports=r.p+"static/media/error.dd18d3ba.mp3"},26:function(e,t,r){e.exports=r.p+"static/media/button.111a056b.mp3"},28:function(e,t,r){e.exports=r(45)},33:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(16),c=r.n(s),u=(r(33),r(15)),o=(r(39),r(8)),i=r(9),p=r(11),S=r(10),O=r(12),l=(r(40),function(e){function t(){return Object(o.a)(this,t),Object(p.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"screen "+(this.props.screen.on?" screen--on":" screen--off")},a.a.createElement("div",{className:"screen__lseg"},this.props.screen.locked),a.a.createElement("div",{className:"screen__mseg"+(this.props.screen.status.length>=10&&this.props.screen.status.length<17?" screen__mseg--small":this.props.screen.status.length>=17?" screen__mseg--extra-small":"")},this.props.screen.status))}}]),t}(n.Component)),d=Object(u.b)((function(e){return{screen:e.screen}}),{})(l),f=r(6),b=r(23),v={keys:[{id:"7",value:7},{id:"8",value:8},{id:"9",value:9},{id:"4",value:4},{id:"5",value:5},{id:"6",value:6},{id:"1",value:1},{id:"2",value:2},{id:"3",value:3},{id:"*",value:"*"},{id:"",value:0},{id:"L",value:"L"}],keyCodes:{1:{value:1,position:6},2:{value:2,position:7},3:{value:3,position:8},4:{value:4,position:3},5:{value:5,position:4},6:{value:6,position:5},7:{value:7,position:0},8:{value:8,position:1},9:{value:9,position:2},"*":{value:"*",position:9},0:{value:0,position:10},l:{value:"L",position:11}},serialNumber:"4815162342",screenStatus:{BLANK:"",ERROR:"Error",READY:"Ready",LOCK:"Locking...",UNLOCK:"Unlocking...",SERVICE:"Service",VALIDATE:"Validating...",SET_PASSWORD:"Enter new password",SET_PASSWORD_SUCCESS:"Setting new password...",SET_PASSWORD_FAIL:"Password changing error"},screenLocked:{LOCK:"Locked",UNLOCK:"Unlocked"},serviceUrl:"https://9w4qucosgf.execute-api.eu-central-1.amazonaws.com/default/CR-JS_team_M02a?code=",setPasswordCode:"******",serviceCode:"000000"};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(r,!0).forEach((function(t){Object(b.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C={locked:v.screenLocked.LOCK,status:v.screenStatus.READY,on:!1,progress:!1,serviceMode:!1,setPassword:!1,idleTime:0,submitTime:0},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t&&t.type){case"CHANGE_STATUS":return h({},e,{status:t.payload,on:!0});case"START_IDLE_TIMING":return h({},e,{progress:!0,idleTime:0,submitTime:0});case"GO_IDLE":return h({},e,{on:!1,progress:!1,status:v.screenStatus.READY,screenMode:!1,setPassword:!1,idleTime:0,submitTime:0});case"RESET_SUBMIT_TIME":return h({},e,{submitTime:0});case"PROCESS_INPUT_ASYNC":return h({},e,{status:v.screenStatus.VALIDATE});case"CHANGE_LOCK":return h({},e,{locked:t.payload});case"UNLOCK_SUCCESS":return h({},e,{status:v.screenStatus.UNLOCK,serviceMode:!1,setPassword:!1});case"UNLOCK_FAIL":return h({},e,{status:v.screenStatus.ERROR,serviceMode:!1,setPassword:!1});case"START_LOCK_ASYNC":return h({},e,{status:v.screenStatus.VALIDATE});case"LOCK_SUCCESS":return h({},e,{status:v.screenStatus.LOCK});case"LOCK_FAIL":return h({},e,{status:v.screenStatus.ERROR});case"START_SERVICE":return h({},e,{status:v.screenStatus.SERVICE,serviceMode:!0,setPassword:!1});case"START_SET_PASSWORD":return h({},e,{status:v.screenStatus.SET_PASSWORD,serviceMode:!1,setPassword:!0});case"SET_PASSWORD_SUCCESS":return h({},e,{status:v.screenStatus.SET_PASSWORD_SUCCESS});case"SET_PASSWORD_FAIL":return h({},e,{status:v.screenStatus.SET_PASSWORD_FAIL});default:return e}},A=Object(f.c)({screen:y}),E=r(27),x=r(2),T=r.n(x),m=r(4),k=r(24),w=r.n(k),j=r(25),L=r.n(j),R=T.a.mark(ce),N=T.a.mark(ue),P=T.a.mark(oe),I=T.a.mark(ie),K=T.a.mark(pe),D=T.a.mark(Se),U=T.a.mark(Oe),g=T.a.mark(le),G=T.a.mark(de),W=T.a.mark(fe),Y=T.a.mark(be),M=T.a.mark(ve),V=T.a.mark(_e),B=T.a.mark(he),F=T.a.mark(Ce),H=T.a.mark(ye),J=T.a.mark(Ae),q=T.a.mark(Ee),z=T.a.mark(xe),$=T.a.mark(Te),Q=T.a.mark(me),X=T.a.mark(ke),Z=T.a.mark(we),ee=T.a.mark(je),te=T.a.mark(Le),re=T.a.mark(Re),ne=new Audio(w.a),ae=new Audio(L.a),se=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function ce(e){var t;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(m.e)({type:"CHANGE_STATUS",payload:t});case 3:case"end":return r.stop()}}),R)}function ue(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.i)("CHANGE_STATUS_ASYNC",ce);case 2:case"end":return e.stop()}}),N)}function oe(){var e,t,r;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(m.f)(y);case 2:return e=n.sent,t=e.screen.idleTime,r=e.screen.submitTime,n.prev=5,n.next=8,Object(m.e)({type:"START_IDLE_TIMING"});case 8:if(!(++t>4)){n.next=16;break}return t=0,n.next=14,Object(m.e)({type:"GO_IDLE"});case 14:return n.next=16,Object(m.e)({type:"STOP_BACKGROUND_SYNC"});case 16:if(!(++r>1&&6===e.screen.status.length&&e.screen.locked===v.screenLocked.LOCK)||e.screen.serviceMode||e.screen.setPassword){n.next=24;break}return n.next=20,Object(m.e)({type:"RESET_SUBMIT_TIME"});case 20:return n.next=22,Object(m.e)({type:"PROCESS_INPUT_ASYNC",payload:e.screen.status});case 22:return n.next=24,Object(m.e)({type:"STOP_BACKGROUND_SYNC"});case 24:if(!(r>1&&e.screen.serviceMode&&e.screen.locked===v.screenLocked.LOCK)){n.next=31;break}return n.next=27,Object(m.e)({type:"CHANGE_STATUS",payload:v.screenStatus.VALIDATE});case 27:return n.next=29,Object(m.e)({type:"START_SERVICE_WORK",payload:e.screen.status});case 29:return n.next=31,Object(m.e)({type:"STOP_BACKGROUND_SYNC"});case 31:if(!(r>1&&e.screen.setPassword)){n.next=38;break}return n.next=34,Object(m.e)({type:"CHANGE_STATUS",payload:v.screenStatus.VALIDATE});case 34:return n.next=36,Object(m.e)({type:"START_SET_PASSWORD_WORK",payload:e.screen.status});case 36:return n.next=38,Object(m.e)({type:"STOP_BACKGROUND_SYNC"});case 38:return n.next=40,se(1e3);case 40:n.next=8;break;case 42:return n.prev=42,n.finish(42);case 44:case"end":return n.stop()}}),P,null,[[5,,42,44]])}function ie(e){var t;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,se(1500);case 3:return r.prev=3,r.next=6,Object(m.b)(fetch,"".concat(v.serviceUrl).concat(t));case 6:return ne.play(),r.next=9,Object(m.e)({type:"UNLOCK_SUCCESS"});case 9:r.next=17;break;case 11:return r.prev=11,r.t0=r.catch(3),ae.play(),r.next=16,Object(m.e)({type:"UNLOCK_FAIL"});case 16:return r.abrupt("return");case 17:case"end":return r.stop()}}),I,null,[[3,11]])}function pe(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)("START_SERVICE_WORK",ie);case 2:case"end":return e.stop()}}),K)}function Se(e){var t;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(m.e)({type:"CHANGE_STATUS",payload:v.screenStatus.VALIDATE});case 3:return r.next=5,se(1500);case 5:if(6!==t.length){r.next=12;break}return localStorage.setItem("password",t),ne.play(),r.next=10,Object(m.e)({type:"SET_PASSWORD_SUCCESS"});case 10:r.next=15;break;case 12:return ae.play(),r.next=15,Object(m.e)({type:"SET_PASSWORD_FAIL"});case 15:case"end":return r.stop()}}),D)}function Oe(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(1500);case 2:return e.next=4,Object(m.e)({type:"GO_IDLE"});case 4:case"end":return e.stop()}}),U)}function le(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)("SET_PASSWORD_SUCCESS",Oe);case 2:case"end":return e.stop()}}),g)}function de(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)("SET_PASSWORD_FAIL",Oe);case 2:case"end":return e.stop()}}),G)}function fe(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)("START_SET_PASSWORD_WORK",Se);case 2:case"end":return e.stop()}}),W)}function be(){var e;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.g)("START_IDLE_TIMING");case 2:if(!t.sent){t.next=12;break}return t.next=5,Object(m.d)(oe);case 5:return e=t.sent,t.next=8,Object(m.g)("STOP_BACKGROUND_SYNC");case 8:return t.next=10,Object(m.c)(e);case 10:t.next=0;break;case 12:case"end":return t.stop()}}),Y)}function ve(e){var t;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,se(1500);case 3:if(t!==v.serviceCode){r.next=7;break}return r.next=6,Object(m.e)({type:"START_SERVICE"});case 6:return r.abrupt("return");case 7:if(t!==v.setPasswordCode){r.next=11;break}return r.next=10,Object(m.e)({type:"START_SET_PASSWORD"});case 10:return r.abrupt("return");case 11:return r.next=13,Object(m.b)(Ee,[t,"UNLOCK_SUCCESS","LOCK_FAIL"]);case 13:case"end":return r.stop()}}),M)}function _e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)("PROCESS_INPUT_ASYNC",ve);case 2:case"end":return e.stop()}}),V)}function he(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.b)(Le,[!0,v.screenLocked.UNLOCK]);case 2:case"end":return e.stop()}}),B)}function Ce(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)("UNLOCK_SUCCESS",he);case 2:case"end":return e.stop()}}),F)}function ye(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.b)(Le,[!1,v.screenLocked.UNLOCK]);case 2:case"end":return e.stop()}}),H)}function Ae(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)("UNLOCK_FAIL",ye);case 2:case"end":return e.stop()}}),J)}function Ee(e){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e[0]!==localStorage.getItem("password")){t.next=6;break}return ne.play(),t.next=4,Object(m.e)({type:e[1]});case 4:t.next=9;break;case 6:return ae.play(),t.next=9,Object(m.e)({type:e[2]});case 9:case"end":return t.stop()}}),q)}function xe(e){var t;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,se(1500);case 3:if(6===t.length){r.next=8;break}return ae.play(),r.next=7,Object(m.e)({type:"LOCK_FAIL"});case 7:return r.abrupt("return");case 8:return r.next=10,Object(m.b)(Ee,[t,"LOCK_SUCCESS","LOCK_FAIL"]);case 10:case"end":return r.stop()}}),z)}function Te(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)("START_LOCK_ASYNC",xe);case 2:case"end":return e.stop()}}),$)}function me(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)("LOCK_SUCCESS",we);case 2:case"end":return e.stop()}}),Q)}function ke(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)("LOCK_FAIL",je);case 2:case"end":return e.stop()}}),X)}function we(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.b)(Le,[!0,v.screenLocked.LOCK]);case 2:case"end":return e.stop()}}),Z)}function je(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.b)(Le,[!1,v.screenLocked.LOCK]);case 2:case"end":return e.stop()}}),ee)}function Le(e){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se(1500);case 2:if(!e[0]){t.next=5;break}return t.next=5,Object(m.e)({type:"CHANGE_LOCK",payload:e[1]});case 5:return t.next=7,Object(m.e)({type:"GO_IDLE"});case 7:case"end":return t.stop()}}),te)}function Re(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)([ue(),be(),_e(),Ce(),Ae(),Te(),me(),ke(),pe(),fe(),le(),de()]);case 2:case"end":return e.stop()}}),re)}var Ne=Object(E.a)(),Pe=Object(f.e)(A,Object(f.d)(Object(f.a)(Ne)));Ne.run(Re);var Ie=Pe;r(42);var Ke=r(26),De=r.n(Ke),Ue=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(p.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).btnSound=new Audio(De.a),r}return Object(O.a)(t,e),Object(i.a)(t,[{key:"dispatchSetPassword",value:function(){Ie.dispatch({type:"START_SET_PASSWORD"}),Ie.dispatch({type:"STOP_BACKGROUND_SYNC"})}},{key:"dispatchLockAsync",value:function(e){Ie.dispatch({type:"START_LOCK_ASYNC",payload:e}),Ie.dispatch({type:"STOP_BACKGROUND_SYNC"})}},{key:"process",value:function(e){this.btnSound.play(),Ie.dispatch({type:"STOP_BACKGROUND_SYNC"}),Ie.dispatch({type:"CHANGE_STATUS_ASYNC",payload:e}),Ie.dispatch({type:"START_IDLE_TIMING"})}},{key:"lockPress",value:function(){this.btnSound.play();var e=this.props.screen.status.length>6?6:this.props.screen.status.length,t=this.props.screen.status.substr(0,e);t===v.setPasswordCode?this.dispatchSetPassword():this.props.screen.locked===v.screenLocked.UNLOCK&&this.dispatchLockAsync(t)}},{key:"changeStatus",value:function(e){if(this.props.screen.status!==v.screenStatus.VALIDATE&&this.props.screen.status!==v.screenStatus.ERROR&&this.props.screen.status!==v.screenStatus.UNLOCK){"L"===e&&this.lockPress();var t=(r=this.props.screen.status)===v.screenStatus.BLANK||r===v.screenStatus.ERROR||r===v.screenStatus.LOCK||r===v.screenStatus.READY||r===v.screenStatus.SERVICE||r===v.screenStatus.UNLOCK||r===v.screenStatus.VALIDATE||r===v.screenStatus.SET_PASSWORD?e:this.props.screen.status+=e.toString();this.props.screen.serviceMode?this.process(t):t.length>6||this.process(t)}var r}},{key:"render",value:function(){var e=this;return a.a.createElement("button",{className:"key",onClick:function(){return e.changeStatus(e.props.value)}},this.props.value)}}]),t}(n.Component),ge=Object(u.b)((function(e){return{screen:e.screen}}),{})(Ue),Ge=(r(43),function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(p.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).state={keys:v.keys},r}return Object(O.a)(t,e),Object(i.a)(t,[{key:"onKeyPress",value:function(e){var t=v.keyCodes[e.key]&&v.keyCodes[e.key].position,r=document.querySelectorAll(".key");r[t]&&r[t].click()}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyPress,!1)}},{key:"render",value:function(){return a.a.createElement("div",{className:"keypad"},this.state.keys.map((function(e){return a.a.createElement(ge,{key:e.id,value:e.value})})))}}]),t}(n.Component)),We=(r(44),function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(p.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).state={serialNumber:v.serialNumber},r}return Object(O.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"safe-deposit"},a.a.createElement(d,null),a.a.createElement(Ge,null),a.a.createElement("div",{className:"safe-deposit__serial-number"},"S/N: ",this.state.serialNumber))}}]),t}(n.Component));var Ye=function(){return a.a.createElement(u.a,{store:Ie},a.a.createElement("div",{className:"App"},a.a.createElement(We,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.00446b2a.chunk.js.map